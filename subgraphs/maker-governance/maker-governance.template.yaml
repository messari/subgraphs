specVersion: 0.0.4
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: DSChief
    network: mainnet
    source:
      address: "0x0a3f6849f78076aefadf113f5bed87720274ddc0"
      abi: DSChief
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Slate
        - Spell
        - Delegate
        - Vote
      abis:
        - name: DSChief
          file: ./abis/DSChief.json
        - name: DSSpell
          file: ./abis/DSSpell.json
      eventHandlers:
        - event: LogNote(indexed bytes4,indexed address,indexed bytes32,indexed bytes32,uint256,bytes)
          topic0: '0xdd46706400000000000000000000000000000000000000000000000000000000' # lock(uint)
          handler: handleLock
        - event: LogNote(indexed bytes4,indexed address,indexed bytes32,indexed bytes32,uint256,bytes)
          topic0: '0xd8ccd0f300000000000000000000000000000000000000000000000000000000' # free(uint)
          handler: handleFree
        - event: LogNote(indexed bytes4,indexed address,indexed bytes32,indexed bytes32,uint256,bytes)
          topic0: '0xa69beaba00000000000000000000000000000000000000000000000000000000' # vote(bytes32)
          handler: handleVote
        - event: LogNote(indexed bytes4,indexed address,indexed bytes32,indexed bytes32,uint256,bytes)
          topic0: '0xed08132900000000000000000000000000000000000000000000000000000000' # vote(address[])
          handler: handleVoteArray
        - event: LogNote(indexed bytes4,indexed address,indexed bytes32,indexed bytes32,uint256,bytes)
          topic0: '0x3c278bd500000000000000000000000000000000000000000000000000000000' # lift(address)
          handler: handleLift
      file: ./src/ds-chief.ts
# templates:
#   - name: DSSpell
#     kind: ethereum/contract
#     network: mainnet
#     source:
#       abi: DSSpell
#     mapping:
#       kind: ethereum/events
#       apiVersion: 0.0.5
#       language: wasm/assemblyscript
#       entities:
#         - Slate
#         - Spell
#         - Delegate
#         - Vote
#       abis:
#         - name: DSChief
#           file: ./abis/DSChief.json
#         - name: DSSpell
#           file: ./abis/DSSpell.json
#       file: ./src/ds-spell.ts